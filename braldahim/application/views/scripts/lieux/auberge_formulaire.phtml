<div class='comp_titre'>Auberge</div>
 <form name='myForm' id='myForm'>
 <input type='hidden' id='nb_valeurs' name='nb_valeurs' value='2'>
 <div class='comp_contenu'>
 	<br />
 	Pour <?=$this->coutCastars?> castars et <?=$this->paUtilisationLieu ?> PA, vous pouvez vous restaurer
 	et, si vous le soutaitez, acheter des rations (&agrave; <?=$this->coutCastars?> castars l'unit&eacute;) <br /><br />
   	
   	Vous avez <?=$this->user->castars_hobbit ?> castar<? if ($this->user->castars_hobbit > 1): echo "s"; endif; ?> et <?=$this->poidsRestant?> Kg de poids transportable disponible.<br>
   		
	<? if ($this->utilisationPossible === false): ?>
   		Vous n'avez pas assez de castars <br />
   	<? elseif ($this->utilisationPaPossible === false) :?>
   		Vous n'avez pas assez de PA <br />
   	<? else: ?> 
   		
   		<? if ($this->nbPossible > 0) :?>
   		Vous pouvez acheter au maximum <?=$this->nbPossible ?> ration<? if ($this->nbPossible > 1): echo "s"; endif; ?>.<br><br>
 	 	<? else: ?>
	    	Vous ne pouvez pas acheter de ration &agrave; emporter<br><br>
	    	<input type='hidden' name='valeur_2' id='valeur_2' value='0'>
	   	<? endif; ?>
	   	
	   	Choix : <br>
	   	<select name='valeur_1' id="valeur_1" onChange="javascript:if ($('valeur_1').value==-1 && $('valeur_2').value==0){$('bouton_auberge').disabled=true } else {$('bouton_auberge').disabled=false }; if ($('valeur_1').value==2 || $('valeur_1').value==3) {$('nbRation').style.display='block'} else { $('nbRation').style.display='none' }">
		<option value='-1'>(Choix &agrave; faire)</option>
		<? foreach ($this->tabChoix as $k => $t) : ?>
		<option value="<?=$k?>" <? if ($t["valid"] === false): echo "disabled"; endif;?>><?=$t["nom"]?> <? if ($t["valid"] === false): echo " (impossible)"; endif;?></option>
		<? endforeach; ?>
		</select>
		<br /><br />
	   	
	   	<div id="nbRation" style="display:none">
	   	Nombre de rations &agrave; acheter (<?=$this->nbPossible ?> maximum) :
	 	 <br>
		 <input type='text' maxlength='7' size='7' name='valeur_2' id='valeur_2' value='0' onkeypress="chiffres(event);"  onkeyup="if (this.value >= 0 && this.value <=<?=$this->nbPossible  ?> && ($('valeur_1').value==2 || $('valeur_1').value==3)) {$('bouton_auberge').disabled=false} else {$('bouton_auberge').disabled=true} ">   		
	    </div>
	    
	<? endif;?>
	<br />
 </div> 
</form>
<br /> 

<? if ($this->utilisationPossible === true && $this->utilisationPaPossible === true): ?>
<input type='button' class='button1' id="bouton_auberge" value='Se restaurer !' onClick="this.disabled=true;_get_('/lieux/doaction?caction=do_lieu_auberge');"  <? if ($this->utilisationPossible == false) echo "disabled"?>>
<? endif; ?>
<? echo Bral_Helper_Fermer::affiche(); ?>