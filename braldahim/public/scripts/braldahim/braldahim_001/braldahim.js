function findSelectedRadioButton(A){var C=$("myForm").elements[A];for(var B=0;B<C.length;B++){if(C[B].checked){return C[B]}}return null}function _get_(B,G){var I="";var E=0;var F="";$("box_chargement").style.display="block";if(B.length>34){if(B.substring(0,12)=="/competences"){if((B.substring(13,15)=="do")&&(B.substring(30,32)=="do")){F="do"}}else{if(B.substring(0,9)=="/echoppes"){if((B.substring(10,12)=="do")&&(B.substring(27,29)=="do")){F="do"}}else{if(B.substring(0,6)=="/lieux"){if((B.substring(7,9)=="do")&&(B.substring(24,26)=="do")){F="do"}}else{if(B.substring(0,11)=="/messagerie"){if((B.substring(12,14)=="do")&&(B.substring(29,31)=="do")){F="do"}}else{if(B.substring(0,11)=="/communaute"){if((B.substring(12,14)=="do")&&(B.substring(29,31)=="do")){F="do"}}}}}}}if($("nb_valeurs")&&(F=="do")){E=$("nb_valeurs").value;var J="";for(i=1;i<=E;i++){var H="valeur_"+i;var D=$(H);if(D.type=="radio"){radioButton=findSelectedRadioButton(H);if(radioButton!=null){I=I+J+"valeur_"+i+"="+findSelectedRadioButton(H).value}else{I=I+J+"valeur_"+i+"="+D.value}}else{if(G){I=I+J+"valeur_"+i+"="+encodeURIComponent(D.value)}else{I=I+J+"valeur_"+i+"="+D.value}}J="&"}}else{if($("nb_valeurs")&&(F=="ask")){Modalbox.hide()}}var C=I;var A=new Ajax.Request(B,{postBody:C,onComplete:showResponse})}function showResponse(K){var L=K.responseXML;var B=K.responseText;var E=false;var F=false;var I=false;var J=false;var G='<?xml version="1.0" encoding="iso-8859-1" ?>';if((L==null)||(B.substring(0,44)!=G)){if(B!="clear"){alert("Une erreur inconnue est survenue. Text:\n"+B)}}else{estInternetExplorer=false;if(navigator.appName=="Microsoft Internet Explorer"){estInternetExplorer=false}else{estInternetExplorer=true}var H=L.getElementsByTagName("root").item(0);for(var D=0;D<H.childNodes.length;D++){var C=H.childNodes.item(D);for(i=0;i<C.childNodes.length;i++){var A=C.childNodes.item(i);if(estInternetExplorer==false){if(i==0){m_type=A.text}if(i==1){m_type_valeur=A.text}if(i==2){m_data=A.text}if(i==2){if(m_type_valeur=="box_action"){E=true}else{if(m_type_valeur=="informations"&&m_data!=""){F=true}else{if(m_type_valeur=="erreur"&&m_data!=""){I=true}}}if(m_type=="display"){_display_(m_type_valeur,m_data)}else{if(m_type=="action"){if(m_type_valeur=="goto"&&m_data!=""){redirection=true;redirection_url=m_data}else{if(m_type_valeur=="effect.appear"&&m_data!=""){Effect.Appear(m_data,{duration:2})}}}}}}else{for(x=0;x<A.childNodes.length;x++){if(i==1){m_type=C.childNodes.item(1).childNodes.item(0).data}if(i==3){m_type_valeur=C.childNodes.item(3).childNodes.item(0).data}if(i==5){m_data=C.childNodes.item(5).childNodes.item(0).data}if(i==5){if(m_type_valeur=="box_action"){E=true}else{if(m_type_valeur=="informations"&&m_data!=""){F=true}else{if(m_type_valeur=="erreur"&&m_data!=""){I=true}}}if(m_type=="display"){_display_(m_type_valeur,m_data)}else{if(m_type=="action"){if(m_type_valeur=="goto"&&m_data!=""){redirection=true;redirection_url=m_data}else{if(m_type_valeur=="activer_wysiwyg"&&m_data!=""){tinyMCE.idCounter=0;tinyMCE.execCommand("mceAddControl",false,m_data)}else{if(m_type_valeur=="effect.disappear"&&m_data!=""){Effect.Appear(m_data,{duration:4,from:1,to:0})}}}}}}}}}}}if(E){Modalbox.show($("box_action"),{title:"Action",width:450,overlayClose:false})}if(F){Modalbox.show($("informations"),{title:"Informations",width:450,overlayClose:false})}if(I){Modalbox.show($("erreur"),{title:"Une erreur est survenu",width:400,overlayClose:false})}else{if($("erreur")){$("erreur").style.display="none"}}$("box_chargement").style.display="none";if(redirection){document.location.href=redirection_url}return }function _display_(A,B){_display_box(A,B)}function _display_box(A,B){if($(A)){$(A).innerHTML=B}if(A=="racine"){_get_("/interface/vue")}}function my_switch(B,A){val=$("switch_"+A).value.split(",");for(i=0;i<val.length;i++){if($(val[i])){$(val[i]).style.display="none"}$("onglet_"+val[i]).className="onglet inactif"}if($(B)){$(B).style.display="block"}$("onglet_"+B).className="onglet actif"}function switch2div(B,A){if($(B).style.display=="none"){$(B).style.display="block";$(A).style.display="none"}else{$(B).style.display="none";$(A).style.display="block"}}function chiffres(B,A){if(!B&&window.event){B=window.event}if(B.keyCode==37||B.keyCode==39||B.keyCode==46||B.keyCode==8){return }else{if(B.keyCode<48||B.keyCode>57){B.returnValue=false;B.cancelBubble=true}}if(B.which==46||B.which==8){return }else{if(A!=null&&B.which==45){return }else{if(B.which<48||B.which>57){B.preventDefault();B.stopPropagation()}}}}function init_wisiwig(){tinyMCE.init({mode:"textareas",theme:"advanced",language:"fr",plugins:"safari,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",theme_advanced_buttons1:"newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,fontselect,fontsizeselect",theme_advanced_buttons2:"bullist,numlist,|,forecolor,backcolor,|,link,unlink,anchor,image,cleanup,emotions,",theme_advanced_buttons3:"",theme_advanced_buttons4:"",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_resizing:true,theme_advanced_path:false,relative_urls:false})}function activer_wysiwyg(A){alert("Activation")}function desactiver_wysiwyg(A){tinyMCE.execCommand("mceRemoveControl",false,A)}function accordion(C,B,E){if($(E)){if($(E)==C){return }}var D=C.parentNode.id+"-body";var A=null;if($(E)){var A=$(E).parentNode.id+"-body"}if($(A)&&$(D)){new Effect.Parallel([new Effect.SlideUp(A),new Effect.SlideDown(D)],{duration:0.1})}else{if($(A)){new Effect.SlideUp(A,{duration:0.1})}if($(D)){new Effect.SlideDown(D,{duration:0.1})}}C.style.backgroundImage="url(/public/images/expanded.gif);";if($($(B).value+"-head")){$($(B).value+"-head").style.backgroundImage="url(/public/images/collapsed.gif);"}if($(E)){$(E).style.backgroundImage="url(/public/images/collapsed.gif);";$(E).id=""}$(B).value=C.parentNode.id;C.id=E}function limiteTailleTextarea(C,B,A){if(C.value.length>=B){C.value=C.value.substring(0,B)}var D=B-C.value.length;var E=D+" caract&egrave;res restants";$(A).innerHTML=E}function ouvrirWin(A,B){window.open(A,B,"directories=no,location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,toolbar=no,width=600,height=600")}function activerRechercheHobbit(A){if($("recherche_"+A+"_actif").value==0){new Ajax.Autocompleter("recherche_"+A,"recherche_"+A+"_update","/Recherche/hobbit/champ/"+A,{paramName:"valeur",indicator:"indicateur_recherche_"+A,minChars:2,afterUpdateElement:getSelectionId,parameters:{champ:"value"}});$("recherche_"+A+"_actif").value=1}}function getSelectionId(C,A){if(A.getAttribute("champ")==null){return }if($(A.getAttribute("champ")).value==""){$(A.getAttribute("champ")).value=A.getAttribute("id_hobbit")}else{$(A.getAttribute("champ")).value=$(A.getAttribute("champ")).value+","+A.getAttribute("id_hobbit")}var B=window.document.createElement("span");B.name="m_"+A.getAttribute("champ")+"_"+A.getAttribute("id_hobbit");var D=A.getAttribute("valeur")+" ("+A.getAttribute("id_hobbit")+')  <img src="/public/images/supprimer.gif" onClick="javascript:supprimerElement(\'aff_'+A.getAttribute("champ")+"','"+B.name+"', '"+A.getAttribute("champ")+"', "+A.getAttribute("id_hobbit")+')" />';B.id=B.name;B.innerHTML=D;$("aff_"+A.getAttribute("champ")).appendChild(B);$("recherche_"+A.getAttribute("champ")).value=""}function supprimerElement(E,D,B,A){$(E).removeChild($(D));var C=$(B).value.split(",");var F="";for(i=0;i<C.length;i++){if(C[i]!=A){if(C[i]!=""){if(F==""){F=C[i]}else{F=F+","+C[i]}}}}$(B).value=F}function ajouterAuContenu(B,A){if($(A).value==""){$(A).value=$(B).value}else{$(A).value=$(A).value+", "+$(B).value}};